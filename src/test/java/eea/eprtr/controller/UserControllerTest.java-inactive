

// See http://docs.spring.io/spring-framework/docs/3.2.0.BUILD-SNAPSHOT/reference/htmlsingle/#spring-mvc-test-framework
public class UserControllerTest {

    @InjectMocks
    UserController controller;

    @Mock
    UserService mockUserService;

    @Mock
    View mockView;

    MockMvc mockMvc;

    @Before
    public void setUp() throws Exception {
        MockitoAnnotations.initMocks(this);
        mockMvc = standaloneSetup(controller)
                .setSingleView(mockView)
                .build();
    }

    @Test
    public void testListUserInGroup() throws Exception {
        List<Person> expectedUser = asList(new Person());
        when(mockUserService.listUser("someGroup")).thenReturn(expectedUser);

        mockMvc.perform(get("/users"))
                .andExpect(status().isOk())
                .andExpect(model().attribute("users", expectedUser))
                .andExpect(view().name("thymeleaf/users"));
    }
}
